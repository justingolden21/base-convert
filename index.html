
<!doctype html>
<html>
<head>
<title>Base Converter</title>
<link rel="shortcut icon" type="image/png" href="logo.png"/>

<meta name="theme-color" content="#ccc">
<meta name="msapplication-navbutton-color" content="#ccc">
<meta name="apple-mobile-web-app-status-bar-style" content="#ccc">


<meta charset="utf-8">
<meta name="title=" content="Base Converter">
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Contvert numbers between binary, octal, decimal, and hexadecimal">
<meta name="keywords" content="number, convert, converter, base, binary, octal, decimal, hexadecimal, hex">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://use.fontawesome.com/releases/v5.0.4/css/all.css" rel="stylesheet">


<link href="styles.css" rel="stylesheet" type="text/css">

</head>
<body>

<div class="text-center container">
<h3 class="lead"><img id="logo" src="logo.svg" width="36px">Base Converter <small>v.1.0.6</small></h3>

<button title="Arithmetic and custom bases" type="button" class="btn btn-default" data-toggle="modal" data-target="#moreModal"><i class="fas fa-calculator"></i> Advanced Arithmetic</button>
<br><br>
<div class="row">
<div class="col-sm-6 col-lg-3">
<input id="binary" class="form-control input-lg text-center" autofocus onclick="this.setSelectionRange(0, this.value.length)" type="text" value="0"><sub>2</sub><label> Binary</label>
</div>

<div class="col-sm-6 col-lg-3">
<input id="octal" class="form-control input-lg text-center" onclick="this.setSelectionRange(0, this.value.length)" type="text" value="0"><sub>8</sub><label> Octal</label>
</div>

<div class="col-sm-6 col-lg-3">
<input id="decimal" class="form-control input-lg text-center" onclick="this.setSelectionRange(0, this.value.length)" type="text" value="0"><sub>10</sub><label> Decimal</label>
</div>

<div class="col-sm-6 col-lg-3">
<input id="hex" class="form-control input-lg text-center" onclick="this.setSelectionRange(0, this.value.length)" type="text" value="0"><sub>16</sub><label> Hex</label>
</div>

</div>

<br>

<p class="text-center bg-info">Hit <kbd>Enter</kbd> (or <kbd>Tab</kbd>) to calculate other values
	<br><br>Use <kbd>Tab</kbd> and <kbd>Shift</kbd>+<kbd>Tab</kbd> to navigate inputs
	<br><br>Use the up and down arrow keys while in an input to increment or decrement it</p>

<hr>

<div class="form-group text-center">
  <label for="valConsole"><button class="btn btn-sm btn-default"><i id="reset" onclick="document.getElementById('valConsole').value='';" title="reset history" class="fas fa-history"></i></button> History</label>
<textarea id="valConsole" class="form-control text-center" rows="5"></textarea>
<br>
<a id="downloadLink" title="download history as text file"><button class="btn btn-sm btn-default"><i class="fas fa-download"></i></button> Download history</a>

</div>
<hr>


<label>Quick Reference Table</label>
<table class="table table-hover table-bordered table-condensed">
<tr>
<th class="text-center">Decimal (base 10)</th>
<th class="text-center">Binary (base 2)</th>
<th class="text-center">Octal (base 8)</th>
<th class="text-center">Hexadecimal (base 16)</th>
</tr>
<tr>
<td>00</td>
<td>0000</td>
<td>00</td>
<td>0</td>
</tr>
<tr>
<td>01</td>
<td>0001</td>
<td>01</td>
<td>1</td>
</tr>
<tr>
<td>02</td>
<td>0010</td>
<td>02</td>
<td>2</td>
</tr>
<tr>
<td>03</td>
<td>0011</td>
<td>03</td>
<td>3</td>
</tr>
<tr>
<td>04</td>
<td>0100</td>
<td>04</td>
<td>4</td>
</tr>
<tr>
<td>05</td>
<td>0101</td>
<td>05</td>
<td>5</td>
</tr>
<tr>
<td>06</td>
<td>0110</td>
<td>06</td>
<td>6</td>
</tr>
<tr>
<td>07</td>
<td>0111</td>
<td>07</td>
<td>7</td>
</tr>
<tr>
<td>08</td>
<td>1000</td>
<td>10</td>
<td>8</td>
</tr>
<tr>
<td>09</td>
<td>1001</td>
<td>11</td>
<td>9</td>
</tr>
<tr>
<td>10</td>
<td>1010</td>
<td>12</td>
<td>A</td>
</tr>
<tr>
<td>11</td>
<td>1011</td>
<td>13</td>
<td>B</td>
</tr>
<tr>
<td>12</td>
<td>1100</td>
<td>14</td>
<td>C</td>
</tr>
<tr>
<td>13</td>
<td>1101</td>
<td>15</td>
<td>D</td>
</tr>
<tr>
<td>14</td>
<td>1110</td>
<td>16</td>
<td>E</td>
</tr>
<tr>
<td>15</td>
<td>1111</td>
<td>17</td>
<td>F</td>
</tr>
</table>
<a href="chart.png" download="chart" title="download chart as image"><button class="btn btn-sm btn-default"><i class="fas fa-download"></i></button> Download chart</a>
&nbsp;&nbsp;&nbsp;&nbsp;

<a id="printLink" title="open tab to print chart" style="cursor:pointer;"><button class="btn btn-sm btn-default"><i class="fas fa-print"></i></button> Print chart</a>

<br><br>

<div id="moreModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><i class="fas fa-calculator"></i> Arithmetic</h4>
      </div>
      <div class="modal-body">

		<div class="checkbox">
			<label><input id="baseCheckbox" checked type="checkbox">Same Bases</label>
		</div>

		<label id="baseLabel">Base:<input id="baseInput" class="form-control" value="10" type="text"></label>

		<div class="row" id="basesDiv">
			<div class="col-sm-4">
				<label>Input1 Base:</label><input id="baseInput1" class="form-control" value="10" type="text">
			</div>
			<div class="col-sm-4">
				<label>Input2 Base:</label><input id="baseInput2" class="form-control" value="10" type="text">
			</div>
			<div class="col-sm-4">
				<label>Output Base:</label><input id="baseInput3" class="form-control" value="10" type="text">
			</div>
		</div>
		
		<hr>

		<input id="val1Input" class="form-control" value="0" type="text">
		<select class="form-control" id="operationInput">
		<option>+</option>
		<option>-</option>
		<option>&times;</option>
		<option>/</option>
		</select>
		<input id="val2Input" class="form-control" value="0" type="text">
		<br>
		<input disabled id="calcOutput" value="" type="text" class="form-control" style="cursor:text;">

      </div>
    </div>

  </div>
</div>


</div>
<script>

/* RECENT CHANGES
arrow keys up and down to change inputs
download history
highlight row of table if applicable
added custom base and arithmetic

TODO
make decimal work (parseFloat doesn't take a radix as a parameter)




MAYBE TODO
enter custom length (nible, byte, 4 bytes) and format to that/pad zeros
signed or unsigned?
convert to ascii characters?
maybe: copy and night mode button?
tutorial on how to convert
enter comma seperated list of items to convert
seperate app: calculate 2^n chart, ascii conversion chart, link here, and byte/kb/mb/gb converter
*/

let baseInput, baseInput1, baseInput2, baseInput3, val1Input, val2Input, operationInput, calcOutput;

window.onload = function() {
		
	let binary = document.getElementById("binary");
	let octal = document.getElementById("octal");
	let decimal = document.getElementById("decimal");
	let hex = document.getElementById("hex");

	binary.select();
	
	binary.onchange = function(e) {
		convert(e, 2);
	}
	octal.onchange = function(e) {
		convert(e, 8);
	}
	decimal.onchange = function(e) {
		convert(e, 10);
	}
	hex.onchange = function(e) {
		convert(e, 16);
	}

	document.getElementById("printLink").onclick = function() {
		let pageToPrint = window.open();
		pageToPrint.document.write("<title>Reference Table | Base Converter</title><img src='chart.png' onload='print();'>");
	}

	document.getElementById("downloadLink").onclick = function() {
		let consoleValue = document.getElementById("valConsole").value.split("\n");
		let text = [];
		for(item in consoleValue) {
			text.push(consoleValue[item] + "\r\n");
		}
		let data = new Blob(text, {type: "text/plain"});
		let textFile = window.URL.createObjectURL(data);
		document.getElementById("downloadLink").download = "History- Base Converter";
		document.getElementById("downloadLink").href = textFile;
	}

	let baseCheckbox = document.getElementById("baseCheckbox");

	baseCheckbox.onchange = function() {
		if(this.checked) {
			document.getElementById("basesDiv").style.display = "none";
			document.getElementById("baseLabel").style.display = "";
		}
		else {
			document.getElementById("basesDiv").style.display = "";
			document.getElementById("baseLabel").style.display = "none";
		}
	}


	baseInput = document.getElementById("baseInput");
	baseInput1 = document.getElementById("baseInput1");
	baseInput2 = document.getElementById("baseInput2");
	baseInput3 = document.getElementById("baseInput3");
	val1Input = document.getElementById("val1Input");
	val2Input = document.getElementById("val2Input");
	operationInput = document.getElementById("operationInput");
	calcOutput = document.getElementById("calcOutput");

	baseInput.onchange = baseInput1.onchange = baseInput2.onchange = baseInput3.onchange = val1Input.onchange = val2Input.onchange = operationInput.onchange = handleOperation;

	document.getElementById("basesDiv").style.display = "none";

}

let baseNames = {"binary":2, "octal":8, "decimal":10, "hex":16}

window.onkeyup = function(e) {
	if(e.keyCode != 38 && e.keyCode != 40)
		return;
	if(document.activeElement.nodeName != "INPUT")
		return;

	let base = baseNames[document.activeElement.id];
	if(e.keyCode == 38) { //up
		document.activeElement.value = add(document.activeElement.value, 1, base);
	}
	else if(e.keyCode == 40) { //down
		document.activeElement.value = add(document.activeElement.value, -1, base);	
	}
}

function add(val, addend, base) {
	let decimalAns = parseInt(val, base);
	decimalAns += addend;
	return decimalAns.toString(base).toUpperCase();
}

function handleOperation() {
	calcOutput.disabled = "false";
	let ans;
	try {
		if(baseCheckbox.checked) {
			ans = doOperation(val1Input.value, baseInput.value, val2Input.value, baseInput.value, operationInput.value, baseInput.value);
		}
		else {
			ans = doOperation(val1Input.value, baseInput1.value, val2Input.value, baseInput2.value, operationInput.value, baseInput3.value);
		}
		calcOutput.value = ans;
	} catch(err) { //todo: handle error more specifically ie. invalid base or invalid value
		calcOutput.value = "Error - Invalid Inputs";
	}
	calcOutput.disabled = "true";
}

function doOperation(val1, base1, val2, base2, operation, answerBase) {
	let decimalVal1 = parseInt(val1, base1);
	decimalVal2 = parseInt(val2, base2);
	let decimalAns;
	if(operation == "+")
		decimalAns = decimalVal1 + decimalVal2;
	else if(operation == "-")
		decimalAns = decimalVal1 - decimalVal2;
	else if(operation == "/")
		decimalAns = decimalVal1 / decimalVal2;
	else
		decimalAns = decimalVal1 * decimalVal2;

	return decimalAns.toString(answerBase).toUpperCase();
}



function convert(e, base) {
	let val = document.getElementById(e.target.id).value;

	let decimalAns = parseInt(val, base);
	if(isNaN(decimalAns) ) { //todo: show error?
		return;
	}
	binary.value = decimalAns.toString(2);
	octal.value = decimalAns.toString(8);
	decimal.value = decimalAns;
	hex.value = decimalAns.toString(16).toUpperCase();
	
	document.getElementById("valConsole").value =
	"Bin: " + decimalAns.toString(2) +
	", Oct: " + decimalAns.toString(8) +
	", Dec: " + decimalAns +
	", Hex: " + decimalAns.toString(16).toUpperCase() + "\n\n" +	
	document.getElementById("valConsole").value;

	//unhighlight row
	let trs = document.getElementsByTagName("tr");
	for(let i=0; i<trs.length; i++) {
		trs[i].classList.remove("bg-info");
	}
	//highlight row if applicable
	if(decimalAns < 16 && decimalAns >= 0) {
		console.log(document.getElementsByTagName("tr")[0]);
		document.getElementsByTagName("tr")[decimalAns+1].classList.add("bg-info");
	}

}

</script>
</body>
</html>
